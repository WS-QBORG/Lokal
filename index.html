<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Mapa inwestycji HVAC – Sidebar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
</head>
<body>
  <header>
    <button onclick="filterMap('all')">Wszystko</button>
    <button onclick="filterMap('2023')">2023</button>
    <button onclick="filterMap('2024')">2024</button>
    <button onclick="filterMap('2025')">2025</button>
    <button onclick="showProjektanci()">Projektanci</button>
  </header>
  <div id="map"></div>
  <div id="sidebar">
    <span id="sidebarClose" onclick="hideSidebar()">✖</span>
    <input type="text" id="searchInput" placeholder="Szukaj projektanta..." oninput="filterProjektanciList()" />
    <select id="sortFilterSelect" onchange="applySortFilter()">
      <option disabled selected>— Sortuj / Filtruj —</option>
      <option value="az">A–Z</option>
      <option value="za">Z–A</option>
      <option value="has-handlowiec">Tylko z handlowcem</option>
      <option value="no-handlowiec">Tylko bez handlowca</option>
      <option value="proj-asc">Liczba projektów ↑</option>
      <option value="proj-desc">Liczba projektów ↓</option>
    </select>
    <button id="applyFilterBtn" onclick="applyProjektantFilter()">Pokaż wybranych</button>
    <div id="sidebarContent"></div>
  </div>
  <div id="profilePanel">
    <span id="profileClose" onclick="hideProfile()">✖</span>
    <div id="profileContent"></div>
  </div>
  <script src="app.js"></script>
  <script>
    // Zamiana domyślnych popupów na ciemne z białym tekstem
    L.Popup.prototype.options.className = 'custom-dark-popup';

    // MarkerCluster z elegancką kolorystyką
    const clusterOptions = {
      iconCreateFunction: function (cluster) {
        const count = cluster.getChildCount();
        let size = 'small';
        if (count >= 100) size = 'large';
        else if (count >= 10) size = 'medium';

        return new L.DivIcon({
          html: `<div><span>${count}</span></div>`,
          className: 'marker-cluster marker-cluster-' + size,
          iconSize: new L.Point(40, 40)
        });
      }
    };
  </script>
</body>
</html>
